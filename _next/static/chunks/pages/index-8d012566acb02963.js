(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(878)}])},878:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return d}});var n=t(5893),l=t(7294);let r=e=>{let{userInput:o,bombMap:t}=e,n=(0,l.useMemo)(()=>{let e=Array.from({length:9},()=>Array(9).fill(-1)),n=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],l=JSON.parse(JSON.stringify(o)),r=[];for(let e=0;e<l.length;e++)for(let o=0;o<l[e].length;o++)1===l[e][o]&&r.push([e,o]);let i=o=>{for(let l of o)if(1!==t[l[0]][l[1]])for(let o of n)void 0!==e[l[0]+o[0]]&&void 0!==e[l[1]+o[1]]&&-1===e[l[0]+o[0]][l[1]+o[1]]&&a([[l[0]+o[0],l[1]+o[1]]])},a=o=>{let l=[];for(let r of o)if(1!==t[r[0]][r[1]]){let o=0;for(let e of n)void 0!==t[r[0]+e[0]]&&void 0!==t[r[1]+e[1]]&&1===t[r[0]+e[0]][r[1]+e[1]]&&o++;e[r[0]][r[1]]=o,0===e[r[0]][r[1]]&&l.push(r)}0!==l.length&&i(l)};return a(r),e},[o,t]);return n},i=()=>{let[e,o]=(0,l.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);console.log("userinput",e);let t=JSON.parse(JSON.stringify(e)),[n,i]=(0,l.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),[a,s]=(0,l.useState)(0);JSON.parse(JSON.stringify(a));let c=r({userInput:e,bombMap:n}),d=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]];console.log("board",c);let f=!1,u=e.some(e=>e.some(e=>0!==e)),_=12,g=e.some((e,o)=>e.some((e,t)=>1===e&&1===n[o][t])),h=(e,l)=>{if(100===e&&100===l){for(let e=0;e<n.length;e++)for(let o=0;o<n[e].length;o++)n[e][o]=0;for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)t[e][o]=0;o(t),s(0)}},v=(e,o)=>{let t=0;for(let n=0;n<o.length;n++)for(let l=0;l<o[n].length;l++)o[l][n]===e&&t++;return t},x=(n,l,r)=>{n.preventDefault(),console.log("右クリック！",l,r),0===e[r][l]&&-1===c[r][l]?(t[r][l]=3,console.log("右3")):3===e[r][l]&&10===c[r][l]?t[r][l]=2:2===e[r][l]&&9===c[r][l]&&(t[r][l]=0),o(t),console.log("uinput",t)};for(let o=0;o<e.length;o++)for(let n=0;n<e[o].length;n++)0===t[o][n]&&10===c[o][n]||9===c[o][n]?c[o][n]=-1:3===t[o][n]?c[o][n]=10:2===t[o][n]&&(c[o][n]=9);if(!0===g){for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)1===t[e][o]&&n[e][o]&&(c[e][o]=12,console.log("赤ボム座標,xy順",o,e));for(let e=0;e<n.length;e++)for(let o=0;o<n[e].length;o++)1===n[e][o]&&(c[e][o]=11);_=14}let m=v(9,c);if(10===(m+=v(10,c)+v(-1,c))){_=13,console.log("クリア");for(let o=0;o<e.length;o++)for(let t=0;t<e[o].length;t++)(-1===c[o][t]||9===c[o][t]||10===c[o][t]&&1!==e[o][t])&&(c[o][t]=10)}let p=10;for(let o=0;o<e.length;o++)for(let t=0;t<e[o].length;t++)10===c[o][t]&&(p-=1);console.log("残り旗数",p);let N=(e,l)=>{if(console.log("クリック※xy順",e,l),t[l][e]=1,o(t),!1===u){let o=[];for(let o of d)void 0!==n[l+o[0]]&&void 0!==n[e+o[1]]&&(n[l+o[0]][e+o[1]]=20);for(n[l][e]=20;o.length<10;){let e=Math.floor(9*Math.random()),t=Math.floor(9*Math.random());0===n[t][e]&&(o.push([t,e]),n[t][e]=1)}for(let o of(console.log("bonbmap",n),d))void 0!==n[l+o[0]]&&void 0!==n[e+o[1]]&&(n[l+o[0]][e+o[1]]=0);n[l][e]=0,i(n)}let r=0;for(let o of d)void 0!==c[l+o[0]]&&void 0!==c[e+o[1]]&&10===c[l+o[0]][e+o[1]]&&(r+=1);if(c[l][e]===r)for(let o of d)void 0!==c[l+o[0]]&&void 0!==c[e+o[1]]&&-1===c[l+o[0]][e+o[1]]&&(t[l+o[0]][e+o[1]]=1);o(t)};return u&&!1===g&&(f=!0),console.log("effect前",f),(0,l.useEffect)(()=>{if(f){let e=setInterval(()=>{s(e=>e+1),console.log("1")},1e3);return()=>{clearInterval(e)}}},[f]),{board:c,click_niko:h,right_click_process:x,clikstone:N,niko_button_value:_,left_flag_count:p,timer_count:a}};var a=t(2729),s=t.n(a);let c=()=>{let{board:e,click_niko:o,right_click_process:t,clikstone:l,niko_button_value:r,left_flag_count:a,timer_count:c}=i();return(0,n.jsx)("div",{className:s().container,children:(0,n.jsxs)("div",{className:s().boardcontainer,children:[(0,n.jsxs)("div",{className:s().topcontainer,children:[(0,n.jsx)("div",{className:s().nikobutton,onClick:()=>o(100,100),children:(0,n.jsx)("div",{className:s().picture,style:{backgroundPosition:-30*r+30}})}),(0,n.jsx)("div",{className:s().timecontainer,children:(0,n.jsx)("p",{children:c})}),(0,n.jsx)("div",{className:s().flagcountcontainer,children:(0,n.jsx)("p",{children:a})})]}),(0,n.jsx)("div",{className:s().boardaround,children:(0,n.jsx)("div",{className:s().board,children:e.map((e,o)=>e.map((e,r)=>(0,n.jsxs)("div",{className:s().cell,onClick:()=>l(r,o),onContextMenu:e=>t(e,r,o),style:{background:"#aeaaaa"},children:[-1!==e&&9!==e&&10!==e&&(0,n.jsx)("div",{className:s().picture,style:{backgroundPosition:-30*e+30}}),(-1===e||9===e||10===e)&&(0,n.jsx)("div",{className:s().stone,children:(9===e||10===e)&&(0,n.jsx)("div",{className:s().picture,style:{backgroundPosition:"".concat(-100*e+100,"%")}})},"".concat(r,"-").concat(o))]},"".concat(r,"-").concat(o))))})})]})})};var d=c},2729:function(e){e.exports={container:"index_container__gnN1f",board:"index_board__2d6xe",boardaround:"index_boardaround___FTF4",boardcontainer:"index_boardcontainer__r_Tvd",topcontainer:"index_topcontainer__Vgiz8",nikobutton:"index_nikobutton__2z3Nb",timecontainer:"index_timecontainer__hr_2V",flagcountcontainer:"index_flagcountcontainer__LogH4",picture:"index_picture__3USzY",cell:"index_cell__3W8ZQ",stone:"index_stone__oeDmm"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);