(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(878)}])},878:function(e,o,n){"use strict";n.r(o),n.d(o,{default:function(){return d}});var t=n(5893),l=n(7294);let r=e=>{let{userInput:o,bombMap:n}=e,t=(0,l.useMemo)(()=>{let e=Array.from({length:9},()=>Array(9).fill(-1)),t=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],l=JSON.parse(JSON.stringify(o)),r=[];for(let e=0;e<l.length;e++)for(let o=0;o<l[e].length;o++)1===l[e][o]&&r.push([e,o]);let i=o=>{for(let l of o)if(1!==n[l[0]][l[1]])for(let o of t)void 0!==e[l[0]+o[0]]&&void 0!==e[l[1]+o[1]]&&-1===e[l[0]+o[0]][l[1]+o[1]]&&a([[l[0]+o[0],l[1]+o[1]]])},a=o=>{let l=[];for(let r of o)if(1!==n[r[0]][r[1]]){let o=0;for(let e of t)void 0!==n[r[0]+e[0]]&&void 0!==n[r[1]+e[1]]&&1===n[r[0]+e[0]][r[1]+e[1]]&&o++;e[r[0]][r[1]]=o,0===e[r[0]][r[1]]&&l.push(r)}0!==l.length&&i(l)};return a(r),e},[o,n]);return t},i=()=>{let[e,o]=(0,l.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);console.log("userinput",e);let n=JSON.parse(JSON.stringify(e)),[t,i]=(0,l.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),a=r({userInput:e,bombMap:t}),s=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]];console.log("board",a);let c=e.some(e=>e.some(e=>0!==e)),d=12,f=e.some((e,o)=>e.some((e,n)=>1===e&&1===t[o][n])),u=(e,l)=>{if(100===e&&100===l){for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)t[e][o]=0;for(let e=0;e<n.length;e++)for(let o=0;o<n[e].length;o++)n[e][o]=0;o(n)}},_=(e,o)=>{let n=0;for(let t=0;t<o.length;t++)for(let l=0;l<o[t].length;l++)o[l][t]===e&&n++;return n},g=(t,l,r)=>{t.preventDefault(),console.log("右クリック！",l,r),0===e[r][l]&&-1===a[r][l]?(n[r][l]=3,console.log("右3")):3===e[r][l]&&10===a[r][l]?n[r][l]=2:2===e[r][l]&&9===a[r][l]&&(n[r][l]=0),o(n),console.log("uinput",n)};for(let o=0;o<e.length;o++)for(let t=0;t<e[o].length;t++)0===n[o][t]&&10===a[o][t]||9===a[o][t]?a[o][t]=-1:3===n[o][t]?a[o][t]=10:2===n[o][t]&&(a[o][t]=9);if(!0===f){for(let e=0;e<n.length;e++)for(let o=0;o<n[e].length;o++)1===n[e][o]&&t[e][o]&&(a[e][o]=12,console.log("赤ボム座標,xy順",o,e));for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)1===t[e][o]&&(a[e][o]=11);d=14}let h=_(9,a);if(10===(h+=_(10,a)+_(-1,a))){d=13,console.log("クリア");for(let o=0;o<e.length;o++)for(let n=0;n<e[o].length;n++)(-1===a[o][n]||9===a[o][n]||10===a[o][n]&&1!==e[o][n])&&(a[o][n]=10)}let v=10;for(let o=0;o<e.length;o++)for(let n=0;n<e[o].length;n++)10===a[o][n]&&(v-=1);console.log("残り旗数",v);let x=(e,l)=>{if(console.log("クリック※xy順",e,l),n[l][e]=1,o(n),!1===c){let o=[];for(let o of s)void 0!==t[l+o[0]]&&void 0!==t[e+o[1]]&&(t[l+o[0]][e+o[1]]=20);for(t[l][e]=20;o.length<10;){let e=Math.floor(9*Math.random()),n=Math.floor(9*Math.random());0===t[n][e]&&(o.push([n,e]),t[n][e]=1)}for(let o of(console.log("bonbmap",t),s))void 0!==t[l+o[0]]&&void 0!==t[e+o[1]]&&(t[l+o[0]][e+o[1]]=0);t[l][e]=0,i(t)}let r=0;for(let o of s)void 0!==a[l+o[0]]&&void 0!==a[e+o[1]]&&10===a[l+o[0]][e+o[1]]&&(r+=1);if(a[l][e]===r)for(let o of s)void 0!==a[l+o[0]]&&void 0!==a[e+o[1]]&&-1===a[l+o[0]][e+o[1]]&&(n[l+o[0]][e+o[1]]=1);o(n)};return{board:a,click_niko:u,right_click_process:g,clikstone:x,niko_button_value:d,left_flag_count:v}};var a=n(2729),s=n.n(a);let c=()=>{let{board:e,click_niko:o,right_click_process:n,clikstone:l,niko_button_value:r,left_flag_count:a}=i();return(0,t.jsx)("div",{className:s().container,children:(0,t.jsxs)("div",{className:s().boardcontainer,children:[(0,t.jsxs)("div",{className:s().topcontainer,children:[(0,t.jsx)("div",{className:s().nikobutton,onClick:()=>o(100,100),children:(0,t.jsx)("div",{className:s().picture,style:{backgroundPosition:-30*r+30}})}),(0,t.jsx)("div",{className:s().timecontainer}),(0,t.jsx)("div",{className:s().flagcountcontainer,children:(0,t.jsx)("p",{children:a})})]}),(0,t.jsx)("div",{className:s().boardaround,children:(0,t.jsx)("div",{className:s().board,children:e.map((e,o)=>e.map((e,r)=>(0,t.jsxs)("div",{className:s().cell,onClick:()=>l(r,o),onContextMenu:e=>n(e,r,o),style:{background:"#aeaaaa"},children:[-1!==e&&9!==e&&10!==e&&(0,t.jsx)("div",{className:s().picture,style:{backgroundPosition:-30*e+30}}),(-1===e||9===e||10===e)&&(0,t.jsx)("div",{className:s().stone,children:(9===e||10===e)&&(0,t.jsx)("div",{className:s().picture,style:{backgroundPosition:"".concat(-100*e+100,"%")}})},"".concat(r,"-").concat(o))]},"".concat(r,"-").concat(o))))})})]})})};var d=c},2729:function(e){e.exports={container:"index_container__gnN1f",board:"index_board__2d6xe",boardaround:"index_boardaround___FTF4",boardcontainer:"index_boardcontainer__r_Tvd",topcontainer:"index_topcontainer__Vgiz8",nikobutton:"index_nikobutton__2z3Nb",timecontainer:"index_timecontainer__hr_2V",flagcountcontainer:"index_flagcountcontainer__LogH4",picture:"index_picture__3USzY",cell:"index_cell__3W8ZQ",stone:"index_stone__oeDmm"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);